---
// src/components/layouts/Footer.astro
import { getTranslations, getAlternateUrl, type Locale } from '../../lib/i18n-data';

interface Props {
  currentLang: Locale;
}

const { currentLang } = Astro.props;
const currentYear = new Date().getFullYear();

// Load translations
const t = await getTranslations(currentLang);

// Build links - ALL routes have prefix
const quickLinks = [
  { href: `/${currentLang}`, label: t.nav.home },
  { href: `/${currentLang}/solutions`, label: t.nav.solutions },
  { href: `/${currentLang}/community`, label: t.nav.community },
  { href: `/${currentLang}/case-studies`, label: t.nav.caseStudies },
];

const serviceLinks = t.services.items.map((item, index) => {
  const href = `/${currentLang}/services#` + ['consulting', 'development', 'design', 'marketing'][index];
  return { href, label: item.title };
});

const contactUrl = `/${currentLang}/contact`;
const currentPath = Astro.url.pathname;
const idUrl = getAlternateUrl(currentPath, 'id');
const enUrl = getAlternateUrl(currentPath, 'en');

// Social links
const socialLinks = [
  {
    name: 'LinkedIn',
    href: 'https://linkedin.com/company/posthinks',
    icon: 'linkedin',
  },
  {
    name: 'Instagram',
    href: 'https://instagram.com/posthinks',
    icon: 'instagram',
  },
  {
    name: 'TikTok',
    href: 'https://tiktok.com/@posthinks',
    icon: 'tiktok',
  },
];
---

<!-- Footer dengan Modern Dark Theme -->
<footer class="relative bg-slate-950 border-t border-white/10 overflow-hidden">
  <!-- Animated Background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Dot Grid Pattern -->
    <div class="absolute inset-0 bg-dot-grid opacity-[0.02]"></div>

    <!-- Gradient Orbs -->
    <div class="absolute top-0 left-1/4 w-[400px] h-[400px] bg-gradient-to-br from-cyan-500/8 to-teal-500/6 rounded-full blur-3xl"></div>
    <div class="absolute bottom-0 right-1/4 w-[500px] h-[500px] bg-gradient-to-tr from-teal-500/6 to-cyan-500/4 rounded-full blur-3xl"></div>
  </div>

  <!-- Main Footer Content -->
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <div class="grid gap-12 py-16 md:grid-cols-2 lg:grid-cols-4">
      <!-- Brand Column -->
      <div class="space-y-6">
        <a
          href={`/${currentLang}`}
          class="flex items-center group"
        >
          <!-- Posthinks Logo - BIGGER -->
          <img
            src="/logo-posthinks.png"
            alt="Posthinks Logo"
            class="h-12 w-auto object-contain transform group-hover:scale-105 transition-transform duration-300"
            width="200"
            height="48"
          />
        </a>
        <p class="text-base text-gray-400 leading-relaxed">
          {t.footer.description}
        </p>

        <!-- Social Links -->
        <div class="flex space-x-4">
          {
            socialLinks.map((social) => (
              <a
                href={social.href}
                class="w-12 h-12 flex items-center justify-center rounded-xl bg-white/5 border border-white/10 text-gray-400 transition-all duration-300 hover:bg-gradient-to-r hover:from-cyan-600 hover:to-teal-600 hover:text-white hover:border-transparent hover:scale-110"
                aria-label={social.name}
                target="_blank"
                rel="noopener noreferrer"
              >
                {social.icon === 'linkedin' && (
                  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
                    <rect x="2" y="9" width="4" height="12"/>
                    <circle cx="4" cy="4" r="2"/>
                  </svg>
                )}
                {social.icon === 'instagram' && (
                  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="20" x="2" y="2" rx="5" ry="5"/>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                    <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/>
                  </svg>
                )}
                {social.icon === 'tiktok' && (
                  <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 12a4 4 0 1 0 4 4V4a5 5 0 0 0 5 5"/>
                  </svg>
                )}
              </a>
            ))
          }
        </div>
      </div>

      <!-- Quick Links -->
      <div>
        <h3 class="mb-6 text-sm font-bold uppercase tracking-wider text-white">{t.footer.quickLinks}</h3>
        <ul class="space-y-4">
          {
            quickLinks.map((link) => (
              <li>
                <a
                  href={link.href}
                  class="text-base text-gray-400 transition-all duration-300 hover:text-cyan-400 hover:translate-x-1 inline-block"
                >
                  {link.label}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- Services -->
      <div>
        <h3 class="mb-6 text-sm font-bold uppercase tracking-wider text-white">{t.footer.services}</h3>
        <ul class="space-y-4">
          {
            serviceLinks.slice(0, 4).map((link) => (
              <li>
                <a
                  href={link.href}
                  class="text-base text-gray-400 transition-all duration-300 hover:text-cyan-400 hover:translate-x-1 inline-block"
                >
                  {link.label}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- CTA -->
      <div class="rounded-3xl bg-gradient-to-br from-cyan-600/20 to-teal-600/20 border border-cyan-500/30 p-8 backdrop-blur-sm">
        <h3 class="mb-3 text-lg font-bold text-white">{t.footer.cta.title}</h3>
        <p class="mb-6 text-base text-gray-300 leading-relaxed">
          {t.footer.cta.description}
        </p>
        <a
          href={contactUrl}
          class="group inline-flex w-full items-center justify-center rounded-xl
                 bg-gradient-to-r from-cyan-600 to-teal-600
                 px-6 py-3.5 text-base font-bold text-white
                 shadow-lg shadow-cyan-500/25
                 transition-all duration-300
                 hover:shadow-cyan-500/40 hover:scale-105"
        >
          <span>{t.footer.cta.button}</span>
          <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
          </svg>
        </a>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="border-t border-white/10 py-8">
      <div class="flex flex-col items-center justify-between space-y-4 sm:flex-row">
        <p class="text-sm text-gray-500">
          &copy; {currentYear} {t.common.siteName}. {t.footer.rights}
        </p>

        <!-- Language Switcher -->
        <div class="flex space-x-6">
          <a
            href={idUrl}
            class={`text-sm transition-all duration-300 hover:text-cyan-400
              ${currentLang === 'id' ? 'text-cyan-400 font-bold' : 'text-gray-500'}`}
          >
            Bahasa Indonesia
          </a>
          <a
            href={enUrl}
            class={`text-sm transition-all duration-300 hover:text-cyan-400
              ${currentLang === 'en' ? 'text-cyan-400 font-bold' : 'text-gray-500'}`}
          >
            English
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
