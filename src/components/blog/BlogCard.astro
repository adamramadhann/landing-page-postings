---
// src/components/blog/BlogCard.astro
// Blog card component dengan Tailwind animations
import type { CollectionEntry } from 'astro:content';
import { formatDate } from '../../lib/utils';

interface Props {
  post: CollectionEntry<'blog'>;
  currentLang: 'id' | 'en';
}

const { post, currentLang: lang } = Astro.props;

// Card data
const { title, description, pubDate, heroImage, category, tags, author } = post.data;
const slug = post.slug;

// Blog URL
const blogUrl = lang === 'en' ? `/en/blog/${slug}` : `/blog/${slug}`;

// Format date
const formattedDate = formatDate(pubDate, lang);
---

<!-- Blog Card dengan Tailwind animations -->
<a
  href={blogUrl}
  class="group flex flex-col overflow-hidden rounded-lg border bg-card
         transition-all duration-300 hover:shadow-lg hover:-translate-y-1"
>
  <!-- Hero Image -->
  {
    heroImage && (
      <div class="relative aspect-[16/9] overflow-hidden bg-muted">
        <img
          src={heroImage.src}
          alt={heroImage.alt || title}
          class="h-full w-full object-cover transition-transform duration-300
                 group-hover:scale-105"
          loading="lazy"
          decoding="async"
        />

        <!-- Category Badge -->
        {category && (
          <span class="absolute left-4 top-4 rounded-full bg-primary/90 px-3 py-1
                        text-xs font-medium text-primary-foreground backdrop-blur-sm">
            {category}
          </span>
        )}
      </div>
    )
  }

  <!-- Content -->
  <div class="flex flex-1 flex-col p-6">
    <!-- Title -->
    <h3 class="text-xl font-semibold transition-colors group-hover:text-primary
                  line-clamp-2">
      {title}
    </h3>

    <!-- Description -->
    <p class="mt-3 line-clamp-3 text-muted-foreground">
      {description}
    </p>

    <!-- Tags -->
    {tags && tags.length > 0 && (
      <div class="mt-4 flex flex-wrap gap-2">
        {tags.slice(0, 3).map(tag => (
          <span class="rounded-full bg-muted px-2.5 py-0.5 text-xs
                         text-muted-foreground">
            #{tag}
          </span>
        ))}
      </div>
    )}

    <!-- Footer -->
    <div class="mt-auto pt-4">
      <div class="flex items-center justify-between text-sm text-muted-foreground">
        <!-- Author -->
        {author && (
          <span class="font-medium">{author}</span>
        )}

        <!-- Date -->
        <time datetime={pubDate.toISOString()}>
          {formattedDate}
        </time>
      </div>

      <!-- Read More Link -->
      <span class="mt-3 inline-flex items-center text-sm font-medium text-primary
                    group-hover:underline">
        {lang === 'id' ? 'Baca Selengkapnya' : 'Read More'}
        <svg
          class="ml-1 h-4 w-4 transition-transform group-hover:translate-x-1"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width={2}
            d="M9 5l7 7-7 7"
          />
        </svg>
      </span>
    </div>
  </div>
</a>
