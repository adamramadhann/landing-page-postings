---
// src/components/layout/Footer.astro
import { getTranslations, getAlternateUrl, type Locale } from '../../lib/i18n-data';

interface Props {
  currentLang: Locale;
}

const { currentLang } = Astro.props;
const currentYear = new Date().getFullYear();

// Load translations
const t = await getTranslations(currentLang);

// Build links
const quickLinks = [
  { href: currentLang === 'id' ? '/' : '/en', label: t.nav.home },
  { href: currentLang === 'id' ? '/services' : '/en/services', label: t.nav.services },
  { href: currentLang === 'id' ? '/blog' : '/en/blog', label: t.nav.blog },
];

const serviceLinks = t.services.items.map((item, index) => {
  const href = (currentLang === 'id' ? '/services#' : '/en/services#') + ['consulting', 'development', 'design', 'marketing'][index];
  return { href, label: item.title };
});

const contactUrl = currentLang === 'id' ? '/contact' : '/en/contact';
const currentPath = Astro.url.pathname;
const idUrl = getAlternateUrl(currentPath, 'id');
const enUrl = getAlternateUrl(currentPath, 'en');

// Social links
const socialLinks = [
  {
    name: 'LinkedIn',
    href: 'https://linkedin.com/company/posthinks',
    icon: 'linkedin',
  },
  {
    name: 'Twitter',
    href: 'https://twitter.com/posthinks',
    icon: 'twitter',
  },
  {
    name: 'Instagram',
    href: 'https://instagram.com/posthinks',
    icon: 'instagram',
  },
];
---

<!-- Footer dengan Tailwind -->
<footer class="border-t bg-muted/50">
  <!-- Main Footer Content -->
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="grid gap-8 py-12 md:grid-cols-2 lg:grid-cols-4">
      <!-- Brand Column -->
      <div class="space-y-4">
        <a
          href={currentLang === 'id' ? '/' : '/en'}
          class="flex items-center space-x-2"
        >
          <svg
            class="h-6 w-6"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M12 2L2 7l10 5 10-5-10-5z" />
            <path d="M2 17l10 5 10-5" />
            <path d="M2 12l10 5 10-5" />
          </svg>
          <span class="font-bold text-lg">{t.common.siteName}</span>
        </a>
        <p class="text-sm text-muted-foreground">
          {t.footer.description}
        </p>

        <!-- Social Links -->
        <div class="flex space-x-4">
          {
            socialLinks.map((social) => (
              <a
                href={social.href}
                class="text-muted-foreground transition-colors hover:text-primary"
                aria-label={social.name}
                target="_blank"
                rel="noopener noreferrer"
              >
                {social.icon === 'linkedin' && (
                  <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                  </svg>
                )}
                {social.icon === 'twitter' && (
                  <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
                  </svg>
                )}
                {social.icon === 'instagram' && (
                  <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                  </svg>
                )}
              </a>
            ))
          }
        </div>
      </div>

      <!-- Quick Links -->
      <div>
        <h3 class="mb-4 text-sm font-semibold">{t.footer.quickLinks}</h3>
        <ul class="space-y-3">
          {
            quickLinks.map((link) => (
              <li>
                <a
                  href={link.href}
                  class="text-sm text-muted-foreground transition-colors hover:text-primary"
                >
                  {link.label}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- Services -->
      <div>
        <h3 class="mb-4 text-sm font-semibold">{t.footer.services}</h3>
        <ul class="space-y-3">
          {
            serviceLinks.slice(0, 4).map((link) => (
              <li>
                <a
                  href={link.href}
                  class="text-sm text-muted-foreground transition-colors hover:text-primary"
                >
                  {link.label}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <!-- CTA -->
      <div class="rounded-lg bg-background p-6 shadow-sm">
        <h3 class="mb-2 text-sm font-semibold">{t.footer.cta.title}</h3>
        <p class="mb-4 text-sm text-muted-foreground">
          {t.footer.cta.description}
        </p>
        <a
          href={contactUrl}
          class="inline-flex w-full items-center justify-center rounded-md
                 bg-primary px-4 py-2 text-sm font-medium text-primary-foreground
                 transition-colors hover:bg-primary/90"
        >
          {t.footer.cta.button}
        </a>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="border-t py-6">
      <div class="flex flex-col items-center justify-between space-y-4 sm:flex-row">
        <p class="text-sm text-muted-foreground">
          &copy; {currentYear} {t.common.siteName}. {t.footer.rights}
        </p>

        <!-- Language Switcher -->
        <div class="flex space-x-6">
          <a
            href={idUrl}
            class={`text-sm transition-colors hover:text-primary
              ${currentLang === 'id' ? 'text-primary font-medium' : 'text-muted-foreground'}`}
          >
            Bahasa Indonesia
          </a>
          <a
            href={enUrl}
            class={`text-sm transition-colors hover:text-primary
              ${currentLang === 'en' ? 'text-primary font-medium' : 'text-muted-foreground'}`}
          >
            English
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
