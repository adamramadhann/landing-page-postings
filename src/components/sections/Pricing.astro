---
// src/components/sections/Pricing.astro
// Pricing Section - Tier Cards with Popular Highlight
import AnimateOnScroll from '../ui/AnimateOnScroll.astro';

interface Props {
  locale: 'id' | 'en';
  pricing: {
    title: string;
    subtitle: string;
    tiers: Array<{
      name: string;
      description: string;
      price: string;
      features: string[];
      cta: string;
      popular: boolean;
    }>;
  };
  contactUrl: string;
}

const { locale, pricing, contactUrl } = Astro.props;

const t = {
  id: {
    perMonth: '/bulan',
    popular: 'Paling Populer',
    choosePlan: 'Pilih Paket'
  },
  en: {
    perMonth: '/month',
    popular: 'Most Popular',
    choosePlan: 'Choose Plan'
  }
};

const data = t[locale];
---

<section class="relative py-32 bg-gradient-to-br from-white via-gray-50 to-cyan-50 overflow-hidden" id="pricing">
  <!-- Animated Background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Grid Pattern -->
    <div class="absolute inset-0 opacity-[0.03]">
      <div class="absolute inset-0 bg-[linear-gradient(to_right,#0891b2_1px,transparent_1px),linear-gradient(to_bottom,#0891b2_1px,transparent_1px)] bg-[size:60px_60px] animate-grid-pan"></div>
    </div>

    <!-- Floating Gradient Orbs -->
    <div class="absolute top-40 right-20 w-[400px] h-[400px] bg-gradient-to-br from-cyan-200/30 to-teal-200/30 rounded-full blur-3xl animate-float"></div>
    <div class="absolute bottom-40 left-20 w-[500px] h-[500px] bg-gradient-to-tr from-blue-200/30 to-purple-200/30 rounded-full blur-3xl animate-float" style="animation-delay: -4s"></div>

    <!-- Floating Particles -->
    <div class="absolute top-1/4 right-1/4 w-2 h-2 bg-cyan-500 rounded-full animate-float-particle opacity-30"></div>
    <div class="absolute top-1/3 left-1/3 w-3 h-3 bg-teal-500 rounded-full animate-float-particle opacity-20" style="animation-delay: -1s"></div>
    <div class="absolute bottom-1/4 right-1/3 w-2 h-2 bg-blue-500 rounded-full animate-float-particle opacity-25" style="animation-delay: -2s"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6 lg:px-8">
    <!-- Section Header -->
    <AnimateOnScroll animation="fade-up" delay={0} duration={700}>
      <div class="text-center mb-20">
        <div class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-white shadow-2xl border border-cyan-200/50 backdrop-blur-sm mb-8">
          <span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 animate-pulse"></span>
          <span class="text-sm font-bold text-gray-900 uppercase tracking-wider">Pricing</span>
        </div>

        <h2 class="text-5xl md:text-6xl lg:text-7xl font-black text-gray-900 mb-6 leading-tight">
          {pricing.title}
        </h2>

        <p class="text-xl text-gray-600 max-w-3xl mx-auto">
          {pricing.subtitle}
        </p>
      </div>
    </AnimateOnScroll>

    <!-- Pricing Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      {pricing.tiers.map((tier, index) => (
        <AnimateOnScroll
          key={tier.name}
          animation="fade-up"
          delay={index * 150}
          duration={800}
          class={"relative group" + (tier.popular ? "md:-translate-y-4" : "")}
        >
          {/* Popular Badge */}
          {tier.popular && (
            <div class="absolute -top-4 left-1/2 transform -translate-x-1/2 z-20">
              <div class="px-6 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 text-white text-sm font-bold rounded-full shadow-xl whitespace-nowrap">
                {data.popular}
              </div>
            </div>
          )}

          {/* Card */}
          <div class={"relative rounded-3xl h-[670px] p-8 border-2 transition-all duration-500 group-hover:shadow-2xl " +
            (tier.popular
              ? "bg-gradient-to-br from-cyan-500 via-teal-500 to-blue-500 border-transparent shadow-xl"
              : "bg-white border-gray-200 hover:border-cyan-300"
            )
          }>
            {/* Hover Glow */}
            <div class={"absolute inset-0 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none " +
              (tier.popular
                ? "bg-gradient-to-br from-cyan-400/20 to-teal-400/20"
                : "bg-gradient-to-br from-cyan-50 to-teal-50"
              )
            }></div>

            <div class="relative z-10">
              {/* Tier Name */}
              <div class="mb-6">
                <h3 class={"text-3xl font-black mb-2 " + (tier.popular ? "text-white" : "text-gray-900")}>
                  {tier.name}
                </h3>
                <p class={"text-base " + (tier.popular ? "text-cyan-100" : "text-gray-600")}>
                  {tier.description}
                </p>
              </div>

              {/* Price */}
              <div class="mb-8">
                <div class={"text-5xl font-black " + (tier.popular ? "text-white" : "text-gray-900")}>
                  {tier.price}
                </div>
              </div>

              {/* Features */}
              <div class="mb-8">
                <ul class="space-y-4">
                  {tier.features.map((feature) => (
                    <li class="flex items-start gap-3">
                      <svg class={"w-5 h-5 flex-shrink-0 mt-0.5 " + (tier.popular ? "text-cyan-200" : "text-cyan-500")} fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                      </svg>
                      <span class={"text-sm " + (tier.popular ? "text-white" : "text-gray-700")}>
                        {feature}
                      </span>
                    </li>
                  ))}
                </ul>
              </div>
            </div>

            <a
                href={contactUrl}
                class={"block absolute bottom-10 left-1/2 transform -translate-x-1/2 w-[80%] text-center py-4 px-6 rounded-xl font-bold text-lg transition-all duration-300 group-hover:scale-105 " +
                  (tier.popular
                    ? "bg-white text-cyan-600 hover:bg-cyan-50 shadow-xl"
                    : "bg-gradient-to-r from-cyan-500 to-teal-500 text-white hover:shadow-lg hover:shadow-cyan-500/50"
                  )
                }
              >
                {tier.cta}
              </a>

            {/* Shine Effect */}
            <div class="absolute inset-0 rounded-3xl overflow-hidden opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none">
              <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
            </div>
          </div>
        </AnimateOnScroll>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(-30px) scale(1.1);
    }
  }

  @keyframes float-particle {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.6;
    }
    25% {
      transform: translate(20px, -30px) scale(1.1);
      opacity: 0.8;
    }
    50% {
      transform: translate(-10px, -50px) scale(0.9);
      opacity: 0.5;
    }
    75% {
      transform: translate(30px, -20px) scale(1.05);
      opacity: 0.7;
    }
  }

  @keyframes grid-pan {
    0% {
      transform: translateX(0) translateY(0);
    }
    100% {
      transform: translateX(-30px) translateY(-30px);
    }
  }

  .animate-float {
    animation: float 8s ease-in-out infinite;
  }

  .animate-float-particle {
    animation: float-particle 10s ease-in-out infinite;
  }

  .animate-grid-pan {
    animation: grid-pan 15s ease-in-out infinite alternate;
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>
