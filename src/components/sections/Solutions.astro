---
// src/components/sections/Solutions.astro
// Solutions Detail Section - Service Offering Cards
import AnimateOnScroll from '../ui/AnimateOnScroll.astro';

interface Props {
  locale: 'id' | 'en';
  solutions: Array<{
    id: string;
    title: string;
    subtitle: string;
    description: string;
    features: string[];
    benefits: Array<{
      label: string;
      value: string;
      color: string;
    }>;
    icon: string;
    color: string;
    bgImage: string;
  }>;
  contactUrl: string;
}

const { locale, solutions, contactUrl } = Astro.props;

const t = {
  id: {
    sectionTitle: 'Solusi Kami',
    sectionSubtitle: 'Layanan komprehensif untuk dominasi digital',
    features: 'Fitur Utama',
    benefits: 'Keuntungan',
    cta: 'Pelajari Lebih Lanjut'
  },
  en: {
    sectionTitle: 'Our Solutions',
    sectionSubtitle: 'Comprehensive services for digital dominance',
    features: 'Key Features',
    benefits: 'Benefits',
    cta: 'Learn More'
  }
};

const data = t[locale];
---

<section class="relative py-32 bg-gradient-to-br from-gray-50 via-white to-cyan-50 overflow-hidden" id="solutions">
  <!-- Animated Background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Grid Pattern -->
    <div class="absolute inset-0 opacity-[0.03]">
      <div class="absolute inset-0 bg-[linear-gradient(to_right,#0891b2_1px,transparent_1px),linear-gradient(to_bottom,#0891b2_1px,transparent_1px)] bg-[size:60px_60px] animate-grid-pan"></div>
    </div>

    <!-- Floating Gradient Orbs - Cyan/Teal Theme Only -->
    <div class="absolute top-40 left-20 w-[400px] h-[400px] bg-gradient-to-br from-cyan-200/30 to-teal-200/30 rounded-full blur-3xl animate-float"></div>
    <div class="absolute bottom-40 right-20 w-[500px] h-[500px] bg-gradient-to-tr from-teal-200/30 to-cyan-200/30 rounded-full blur-3xl animate-float" style="animation-delay: -4s"></div>

    <!-- Floating Particles - Cyan/Teal Only -->
    <div class="absolute top-1/4 left-1/4 w-2 h-2 bg-cyan-500 rounded-full animate-float-particle opacity-30"></div>
    <div class="absolute top-1/3 right-1/3 w-3 h-3 bg-teal-500 rounded-full animate-float-particle opacity-20" style="animation-delay: -1s"></div>
    <div class="absolute bottom-1/4 left-1/3 w-2 h-2 bg-cyan-400 rounded-full animate-float-particle opacity-25" style="animation-delay: -2s"></div>
  </div>

  <div class="relative z-10 max-w-7xl space-y-10 md:space-y-52 mx-auto px-6 lg:px-8">
    <!-- Section Header -->
    <AnimateOnScroll animation="fade-up" delay={0} duration={700}>
      <div class="text-center">
        <div class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-white shadow-2xl border border-cyan-200/50 backdrop-blur-sm mb-8">
          <span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-cyan-500 to-teal-500 animate-pulse"></span>
          <span class="text-sm font-bold text-gray-900 uppercase tracking-wider">{data.sectionTitle}</span>
        </div>

        <h2 class="text-5xl md:text-6xl lg:text-7xl font-black text-gray-900 mb-6 leading-tight">
          {data.sectionSubtitle}
        </h2>
      </div>
    </AnimateOnScroll>

    <!-- Solutions Grid -->
    <div class="grid grid-cols-1 gap-16">
      {solutions.map((solution, index) => (
        <AnimateOnScroll
          key={solution.id}
          animation="fade-up"
          delay={index * 150}
          duration={800}
          class={"group relative flex flex-col lg:flex-row gap-8 lg:gap-12 items-center " + (index % 2 !== 0 ? "lg:flex-row-reverse" : "")}
        >
          <!-- Content Side -->
          <div class="flex-1">
            <!-- Icon & Title -->
            <div class="flex items-center gap-4 mb-6">
              <div class={`w-20 h-20 rounded-2xl bg-gradient-to-br ${solution.color} flex items-center justify-center text-4xl shadow-lg transform group-hover:scale-110 group-active:scale-95 transition-all duration-300`}>
                {solution.icon}
              </div>
              <div>
                <h3 class="text-3xl md:text-4xl font-black text-gray-900 transition-colors duration-300" style={`--hover-color: ${solution.color.split(' ')[1]}`}>{solution.title}</h3>
                <p class={`text-base font-semibold mt-1 bg-gradient-to-r ${solution.color} bg-clip-text text-transparent`}>{solution.subtitle}</p>
              </div>
            </div>

            <!-- Description -->
            <p class="text-lg text-gray-600 leading-relaxed mb-8 group-active:text-gray-700 transition-colors duration-300">
              {solution.description}
            </p>

            <!-- Features -->
            <div class="mb-8">
              <h4 class="text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 flex items-center gap-2">
                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                {data.features}
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                {solution.features.slice(0, 6).map((feature, i) => (
                  <div class="flex items-start gap-3 text-sm text-gray-700 group-hover:translate-x-1 group-active:translate-x-2 transition-all duration-300" style={`transition-delay: ${i * 50}ms`}>
                    <div class={`w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-gradient-to-r ${solution.color}`}></div>
                    <span>{feature}</span>
                  </div>
                ))}
              </div>
            </div>

            <!-- Benefits -->
            <div class="grid grid-cols-3 gap-4 mb-8">
              {solution.benefits.map((benefit, i) => (
                <div class={`group/benefit p-4 rounded-xl bg-gray-50 border border-gray-200 hover:border-current hover:bg-opacity-10 transition-all duration-300 hover:transform hover:scale-105 hover:-translate-y-1 active:scale-95`} style={`color: ${solution.color.split(' ')[2] || '#0891b2'}`} class:solution-color={`solution-color-${index}`}>
                  <div class="text-2xl md:text-3xl font-black mb-1 group-hover/benefit:opacity-80 transition-opacity duration-300" style={`background: linear-gradient(to right, ${solution.color.split(' ')[1]}, ${solution.color.split(' ')[2] || '#0891b2'}); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;`}>
                    {benefit.value}
                  </div>
                  <div class="text-xs font-semibold text-gray-600 uppercase tracking-wider">
                    {benefit.label}
                  </div>
                </div>
              ))}
            </div>

            <!-- CTA Button -->
            <a
              href={contactUrl}
              class={`group/btn inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r ${solution.color} text-white font-bold rounded-xl shadow-lg hover:shadow-lg hover:scale-105 active:scale-95 transition-all duration-300`}
              style={`--tw-shadow-color: ${solution.color.split(' ')[1]}`}
            >
              <span>{data.cta}</span>
              <svg class="w-5 h-5 group-hover/btn:translate-x-1 active:translate-x-2 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>
          </div>

          <!-- Visual Side -->
          <div class="flex-1">
            <div class="relative rounded-2xl overflow-hidden shadow-2xl transform group-hover:scale-[1.02] group-active:scale-[0.98] transition-all duration-500">
              <!-- Background Image Container -->
              <div class="absolute inset-0">
                <img
                  src={solution.bgImage}
                  alt={solution.title}
                  class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"
                  loading="lazy"
                />
              </div>

              <!-- Gradient Overlay -->
              <div class={`absolute inset-0 bg-gradient-to-br ${solution.color} opacity-80 group-hover:opacity-85 transition-opacity duration-500`}></div>

              <!-- Pattern Overlay -->
              <div class="absolute inset-0 opacity-[0.1]">
                <div class="absolute inset-0 bg-[linear-gradient(to_right,#fff_1px,transparent_1px),linear-gradient(to_bottom,#fff_1px,transparent_1px)] bg-[size:20px_20px]"></div>
              </div>

              <!-- Icon Badge -->
              <div class="absolute top-6 right-6 w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-xl flex items-center justify-center text-4xl shadow-xl transform group-hover:scale-110 group-hover:rotate-12 group-active:scale-100 group-active:rotate-0 transition-all duration-300 z-20">
                {solution.icon}
              </div>

              <!-- Content Overlay -->
              <div class="absolute bottom-0 left-0 right-0 p-6 transform group-hover:translate-y-[-2px] group-active:translate-y-0 transition-transform duration-300 z-20">
                <div class="bg-white/10 backdrop-blur-xl rounded-xl p-4 border border-white/20 group-hover:bg-white/15 transition-all duration-300">
                  <div class="text-white text-sm font-semibold">
                    {solution.title}
                  </div>
                </div>
              </div>

              <!-- Shine Effect -->
              <div class="absolute inset-0 opacity-0 group-hover:opacity-100 group-active:opacity-100 transition-opacity duration-500 pointer-events-none z-10">
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent transform -translate-x-full group-hover:translate-x-full group-active:translate-x-full transition-transform duration-1000"></div>
              </div>
            </div>
          </div>
        </AnimateOnScroll>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(-30px) scale(1.1);
    }
  }

  @keyframes float-particle {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.6;
    }
    25% {
      transform: translate(20px, -30px) scale(1.1);
      opacity: 0.8;
    }
    50% {
      transform: translate(-10px, -50px) scale(0.9);
      opacity: 0.5;
    }
    75% {
      transform: translate(30px, -20px) scale(1.05);
      opacity: 0.7;
    }
  }

  @keyframes grid-pan {
    0% {
      transform: translateX(0) translateY(0);
    }
    100% {
      transform: translateX(-30px) translateY(-30px);
    }
  }

  .animate-float {
    animation: float 8s ease-in-out infinite;
  }

  .animate-float-particle {
    animation: float-particle 10s ease-in-out infinite;
  }

  .animate-grid-pan {
    animation: grid-pan 15s ease-in-out infinite alternate;
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>
