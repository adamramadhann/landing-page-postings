---
// src/components/sections/CaseStudiesHero.astro
import AnimateOnScroll from '@/components/ui/AnimateOnScroll.astro';

interface Props {
  locale: 'id' | 'en';
  data: {
    badge: string;
    title: string;
    subtitle: string;
    description: string;
  };
  featuredCase: {
    brand: string;
    product: string;
    logo: string;
    color: string;
    image: string;
    results: Array<{
      metric: string;
      label: { id: string; en: string };
    }>;
  };
  stats: Array<{
    value: string;
    label: { id: string; en: string };
  }>;
}

const { locale, data, featuredCase, stats } = Astro.props;
---

<section class="relative min-h-screen flex items-center overflow-hidden bg-slate-950" id="hero">
  <!-- Animated Background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Dot Grid Pattern -->
    <div class="absolute inset-0 bg-dot-grid opacity-[0.03]"></div>

    <!-- Gradient Orbs - CYAN/TEAL ONLY -->
    <div class="absolute top-0 right-0 w-[800px] h-[800px] bg-gradient-to-br from-cyan-500/8 via-teal-500/5 to-transparent rounded-full blur-3xl animate-orb-drift"></div>
    <div class="absolute bottom-0 left-0 w-[600px] h-[600px] bg-gradient-to-tr from-teal-500/6 via-cyan-500/4 to-transparent rounded-full blur-3xl animate-orb-drift" style="animation-delay: -6s"></div>

    <!-- Noise Texture Overlay -->
    <div class="absolute inset-0 bg-noise opacity-[0.02]"></div>

    <!-- Background Image with Blend -->
    <img src={featuredCase.image} class="absolute inset-0 w-full h-full object-cover opacity-5 mix-blend-luminosity" alt="Background" />

    <!-- Floating Particles -->
    <div class="absolute top-1/4 right-1/4 w-2 h-2 bg-cyan-500 rounded-full animate-float-particle opacity-30"></div>
    <div class="absolute top-1/3 left-1/3 w-3 h-3 bg-teal-500 rounded-full animate-float-particle opacity-20" style="animation-delay: -1s"></div>
    <div class="absolute bottom-1/4 right-1/3 w-2 h-2 bg-cyan-400 rounded-full animate-float-particle opacity-25" style="animation-delay: -2s"></div>
    <div class="absolute bottom-1/3 left-1/4 w-3 h-3 bg-teal-400 rounded-full animate-float-particle opacity-20" style="animation-delay: -3s"></div>
  </div>

  <div class="container mx-auto px-6 lg:px-12 relative z-10 py-24">
    <div class="grid lg:grid-cols-2 gap-16 items-center">

      <div class="space-y-8">
        <AnimateOnScroll animation="fade-right" delay={100}>
          <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-cyan-500/10 border border-cyan-500/20 shadow-2xl">
            <span class="w-2 h-2 rounded-full bg-cyan-400 animate-pulse"></span>
            <span class="text-xs font-black tracking-widest text-cyan-400 uppercase">{data.badge}</span>
          </div>
        </AnimateOnScroll>

        <AnimateOnScroll animation="fade-right" delay={300}>
          <h1 class="text-5xl lg:text-7xl font-black text-white leading-[1.1] tracking-tight">
            {data.title}
            <span class="block text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-teal-400">
              {data.subtitle}
            </span>
          </h1>
        </AnimateOnScroll>

        <AnimateOnScroll animation="fade-right" delay={500}>
          <p class="text-2xl lg:text-3xl text-gray-300 font-medium leading-relaxed max-w-xl">
            {data.description}
          </p>
        </AnimateOnScroll>

        <AnimateOnScroll animation="fade-up" delay={700}>
          <div class="flex flex-wrap gap-10 pt-6 border-t border-white/10">
            {stats.map((stat) => (
              <div class="group">
                <div class="text-3xl font-black text-white group-hover:text-cyan-400 transition-colors">{stat.value}</div>
                <div class="text-[10px] font-bold text-gray-500 uppercase tracking-widest">{stat.label[locale]}</div>
              </div>
            ))}
          </div>
        </AnimateOnScroll>
      </div>

      <div class="relative h-[600px] flex items-center justify-center">

        <div class="relative z-20 w-full max-w-[480px] aspect-[4/5] bg-slate-900 rounded-[2.5rem] overflow-hidden border border-white/10 shadow-[0_40px_80px_-15px_rgba(0,0,0,0.7)] animate-float-slow">
           <img src={featuredCase.image} class="w-full h-full object-cover transition-transform duration-700 hover:scale-110 opacity-60" alt={featuredCase.brand} />
           <div class="absolute inset-0 bg-gradient-to-t from-slate-950 via-slate-950/20 to-transparent"></div>

           <div class="absolute bottom-0 left-0 right-0 p-8 space-y-6">
              <div class="flex items-center gap-4">
                 <div class="w-14 h-14 rounded-2xl bg-gradient-to-br from-cyan-500 to-teal-500 flex items-center justify-center text-white font-black text-2xl shadow-xl">
                    {featuredCase.logo}
                 </div>
                 <div>
                    <h3 class="text-2xl font-black text-white uppercase tracking-tight">{featuredCase.brand}</h3>
                    <p class="text-cyan-400 text-xs font-bold uppercase tracking-widest">{featuredCase.product}</p>
                 </div>
              </div>

              <div class="grid grid-cols-2 gap-3">
                 {featuredCase.results.slice(0, 2).map((res) => (
                    <div class="p-4 bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl">
                       <p class="text-xl font-black text-white">{res.metric}</p>
                       <p class="text-[9px] text-gray-400 font-bold uppercase tracking-tighter">{res.label[locale]}</p>
                    </div>
                 ))}
              </div>
           </div>
        </div>

        <div class="absolute top-[10%] -right-4 z-30 bg-gradient-to-r from-cyan-600 to-teal-600 p-5 rounded-3xl shadow-[0_20px_40px_rgba(8,145,178,0.3)] animate-bounce-slow">
           <div class="flex items-center gap-3 text-white">
              <div class="p-2 bg-white/20 rounded-lg">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/></svg>
              </div>
              <div>
                <p class="text-[9px] font-black uppercase opacity-80 leading-none mb-1">Total ROI</p>
                <p class="text-xl font-black leading-none">12.5x</p>
              </div>
           </div>
        </div>

        <div class="absolute bottom-[20%] -left-10 z-30 bg-slate-900/80 backdrop-blur-2xl border border-white/20 p-6 rounded-[2rem] shadow-2xl animate-float-slow" style="animation-delay: -3s">
           <div class="space-y-3">
              <div class="flex items-center gap-2">
                 <span class="w-2 h-2 rounded-full bg-cyan-400"></span>
                 <p class="text-[10px] font-black text-white uppercase tracking-widest">Global Reach</p>
              </div>
              <p class="text-3xl font-black text-white tracking-tighter">5.2M+</p>
              <div class="h-1.5 w-full bg-white/10 rounded-full overflow-hidden">
                 <div class="h-full w-[85%] bg-gradient-to-r from-cyan-400 to-teal-500 rounded-full"></div>
              </div>
           </div>
        </div>

      </div>
    </div>
  </div>
</section>

<style>
  @keyframes float-particle {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.6;
    }
    25% {
      transform: translate(20px, -30px) scale(1.1);
      opacity: 0.8;
    }
    50% {
      transform: translate(-10px, -50px) scale(0.9);
      opacity: 0.5;
    }
    75% {
      transform: translate(30px, -20px) scale(1.05);
      opacity: 0.7;
    }
  }

  @keyframes float-slow {
    0%, 100% { transform: translateY(0px) scale(1); }
    50% { transform: translateY(-20px) scale(1.02); }
  }

  @keyframes bounce-slow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-15px); }
  }

  .animate-float-particle {
    animation: float-particle 10s ease-in-out infinite;
  }

  .animate-float-slow { animation: float-slow 6s ease-in-out infinite; }
  .animate-bounce-slow { animation: bounce-slow 4s ease-in-out infinite; }

  /* AOS Overrides for smoother feel */
  :global([data-aos="fade-right"]) {
    opacity: 0;
    transform: translateX(-40px);
    transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
  }
  :global([data-aos="fade-right"].aos-animate) {
    opacity: 1;
    transform: translateX(0);
  }
</style>

<script>
  // Parallax for floating elements
  document.addEventListener('mousemove', (e) => {
    const cards = document.querySelectorAll('.z-20, .z-30');
    const x = (e.clientX / window.innerWidth - 0.5) * 20;
    const y = (e.clientY / window.innerHeight - 0.5) * 20;
    
    cards.forEach((card, index) => {
      const depth = (index + 1) * 0.6;
      (card as HTMLElement).style.transform = `translate(${x * depth}px, ${y * depth}px)`;
    });
  });
</script>