---
// src/components/sections/Industries.astro
// Industries Section - Auto-scroll Marquee with Hover Effects
import AnimateOnScroll from '../ui/AnimateOnScroll.astro';

interface Props {
  locale: 'id' | 'en';
  industries: {
    title: string;
    subtitle: string;
    items: Array<{
      name: string;
      icon: string;
      image: string;
      color: string;
      benefits: string[];
    }>;
  };
  contactUrl: string;
}

const { locale, industries, contactUrl } = Astro.props;

const t = {
  id: {
    benefitsTitle: 'Keuntungan',
    learnMore: 'Pelajari Lebih Lanjut'
  },
  en: {
    benefitsTitle: 'Benefits',
    learnMore: 'Learn More'
  }
};

const data = t[locale];
---

<section class="relative py-32 bg-gradient-to-br from-gray-900 via-gray-800 to-cyan-900 overflow-hidden" id="industries">
  <!-- Animated Background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <!-- Grid Pattern -->
    <div class="absolute inset-0 opacity-[0.03]">
      <div class="absolute inset-0 bg-[linear-gradient(to_right,#0891b2_1px,transparent_1px),linear-gradient(to_bottom,#0891b2_1px,transparent_1px)] bg-[size:60px_60px] animate-grid-pan"></div>
    </div>

    <!-- Floating Gradient Orbs -->
    <div class="absolute top-40 left-20 w-[500px] h-[500px] bg-gradient-to-br from-cyan-400/20 to-teal-400/15 rounded-full blur-3xl animate-float"></div>
    <div class="absolute bottom-40 right-20 w-[400px] h-[400px] bg-gradient-to-tr from-blue-400/20 to-purple-400/15 rounded-full blur-3xl animate-float" style="animation-delay: -4s"></div>

    <!-- Floating Particles -->
    <div class="absolute top-1/4 left-1/4 w-2 h-2 bg-cyan-400 rounded-full animate-float-particle opacity-30"></div>
    <div class="absolute top-1/3 right-1/3 w-3 h-3 bg-teal-400 rounded-full animate-float-particle opacity-20" style="animation-delay: -1s"></div>
    <div class="absolute bottom-1/4 left-1/3 w-2 h-2 bg-blue-400 rounded-full animate-float-particle opacity-25" style="animation-delay: -2s"></div>
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6 lg:px-8">
    <!-- Section Header -->
    <AnimateOnScroll animation="fade-up" delay={0} duration={700}>
      <div class="text-center mb-20">
        <div class="inline-flex items-center gap-2 px-5 py-2.5 rounded-full bg-white/10 backdrop-blur-xl border border-cyan-400/30 shadow-xl mb-8">
          <span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-cyan-400 to-teal-400 animate-pulse"></span>
          <span class="text-sm font-bold text-white uppercase tracking-wider">Industries</span>
        </div>

        <h2 class="text-5xl md:text-6xl lg:text-7xl font-black text-white mb-6 leading-tight">
          {industries.title}
        </h2>

        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          {industries.subtitle}
        </p>
      </div>
    </AnimateOnScroll>
  </div>

  <!-- Industries Marquee - Full Width -->
  <div class="relative mt-20">
    <!-- Fade Edges -->
    <div class="absolute inset-y-0 left-0 w-32 md:w-48 bg-gradient-to-r from-gray-900 via-gray-900/80 to-transparent z-10"></div>
    <div class="absolute inset-y-0 right-0 w-32 md:w-48 bg-gradient-to-l from-gray-900 via-gray-900/80 to-transparent z-10"></div>

    <!-- Marquee Track -->
    <div class="overflow-hidden">
      <div class="flex items-center gap-6 md:gap-8 animate-marquee hover:pause-marquee py-8">
        {/* First set */}
        {industries.items.map((industry) => (
          <div class="industry-card flex-shrink-0 w-72 md:w-80 relative group">
            <div class="relative rounded-2xl overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 hover:border-cyan-400/50 transition-all duration-500">
              <!-- Background Image Container -->
              <div class="absolute inset-0">
                <img
                  src={industry.image}
                  alt={industry.name}
                  class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700"
                  loading="lazy"
                />
              </div>

              <!-- Gradient Overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent group-hover:from-gray-900/75 group-hover:via-gray-900/60 transition-all duration-500"></div>

              <!-- Content -->
              <div class="relative z-10 p-6 min-h-[280px] flex flex-col">
                <div class="flex items-center gap-3 mb-4">
                  <div class={`w-14 h-14 rounded-xl bg-gradient-to-br ${industry.color} flex items-center justify-center text-2xl shadow-lg`}>
                    {industry.icon}
                  </div>
                  <div>
                    <h3 class="text-xl font-bold text-white">{industry.name}</h3>
                  </div>
                </div>

                <!-- Benefits (Reveal on Hover) - ONLY SHOW ON HOVER -->
                <div class="mt-auto space-y-2 max-h-0 overflow-hidden group-hover:max-h-48 transition-all duration-500">
                  <div class="text-xs font-semibold text-cyan-400 uppercase tracking-wider mb-3 pt-2">
                    {data.benefitsTitle}
                  </div>
                  {industry.benefits.map((benefit) => (
                    <div class="flex items-center gap-2 text-sm text-gray-200">
                      <svg class="w-4 h-4 text-cyan-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                      <span>{benefit}</span>
                    </div>
                  ))}
                </div>
              </div>

              <!-- Hover Glow - Subtle -->
              <div class={`absolute inset-0 bg-gradient-to-br ${industry.color} opacity-0 group-hover:opacity-10 transition-opacity duration-500 pointer-events-none`}></div>
            </div>
          </div>
        ))}

        {/* Duplicate set for seamless loop */}
        {industries.items.map((industry) => (
          <div class="industry-card flex-shrink-0 w-72 md:w-80 relative group">
            <div class="relative rounded-2xl overflow-hidden bg-white/5 backdrop-blur-xl border border-white/10 hover:border-cyan-400/50 transition-all duration-500">
              <!-- Background Image Container -->
              <div class="absolute inset-0">
                <img
                  src={industry.image}
                  alt={industry.name}
                  class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700"
                  loading="lazy"
                />
              </div>

              <!-- Gradient Overlay -->
              <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent group-hover:from-gray-900/75 group-hover:via-gray-900/60 transition-all duration-500"></div>

              <!-- Content -->
              <div class="relative z-10 p-6 min-h-[280px] flex flex-col">
                <div class="flex items-center gap-3 mb-4">
                  <div class={`w-14 h-14 rounded-xl bg-gradient-to-br ${industry.color} flex items-center justify-center text-2xl shadow-lg`}>
                    {industry.icon}
                  </div>
                  <div>
                    <h3 class="text-xl font-bold text-white">{industry.name}</h3>
                  </div>
                </div>

                <!-- Benefits (Reveal on Hover) - ONLY SHOW ON HOVER -->
                <div class="mt-auto space-y-2 max-h-0 overflow-hidden group-hover:max-h-48 transition-all duration-500">
                  <div class="text-xs font-semibold text-cyan-400 uppercase tracking-wider mb-3 pt-2">
                    {data.benefitsTitle}
                  </div>
                  {industry.benefits.map((benefit) => (
                    <div class="flex items-center gap-2 text-sm text-gray-200">
                      <svg class="w-4 h-4 text-cyan-400 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                      </svg>
                      <span>{benefit}</span>
                    </div>
                  ))}
                </div>
              </div>

              <!-- Hover Glow - Subtle -->
              <div class={`absolute inset-0 bg-gradient-to-br ${industry.color} opacity-0 group-hover:opacity-10 transition-opacity duration-500 pointer-events-none`}></div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>

      <!-- CTA -->
      <AnimateOnScroll animation="fade-up" delay={400} duration={700}>
        <div class="text-center mt-20">
          <a
            href={contactUrl}
            class="group inline-flex items-center gap-4 px-10 py-5 bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-bold text-lg rounded-2xl shadow-xl hover:shadow-cyan-500/50 hover:scale-105 transition-all duration-300"
          >
            <span>{data.learnMore}</span>
            <svg class="w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
            </svg>
          </a>
        </div>
      </AnimateOnScroll>
  
</section>

<style>
  @keyframes float {
    0%, 100% {
      transform: translateY(0px) scale(1);
    }
    50% {
      transform: translateY(-30px) scale(1.1);
    }
  }

  @keyframes float-particle {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.6;
    }
    25% {
      transform: translate(20px, -30px) scale(1.1);
      opacity: 0.8;
    }
    50% {
      transform: translate(-10px, -50px) scale(0.9);
      opacity: 0.5;
    }
    75% {
      transform: translate(30px, -20px) scale(1.05);
      opacity: 0.7;
    }
  }

  @keyframes grid-pan {
    0% {
      transform: translateX(0) translateY(0);
    }
    100% {
      transform: translateX(-30px) translateY(-30px);
    }
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }

  .animate-float {
    animation: float 8s ease-in-out infinite;
  }

  .animate-float-particle {
    animation: float-particle 10s ease-in-out infinite;
  }

  .animate-grid-pan {
    animation: grid-pan 15s ease-in-out infinite alternate;
  }

  .animate-marquee {
    animation: marquee 30s linear infinite;
  }

  .hover\:pause-marquee:hover {
    animation-play-state: paused;
  }

  /* Reduced Motion Support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }

    .hover\:pause-marquee:hover {
      animation-play-state: running;
    }
  }
</style>
